#!/bin/bash

source LifoConfig

# ~/lifo
#     +-- bin
#     +-- etc
#     +-- lib
#         +-- bootstrap
#         +-- interim
#         +-- package
#

# ~/lfs
#     +-- bootstrap
#         +-- build             overlay upperdir
#         +-- consolidated      overlay lowerdir 2
#             +-- tools         bound to ~/lfs/tools
#             +-- sources       bound to ~/lfs/sources
#             +-- <artefacts>   other stuff from builds
#         +-- host              overlay lowerdir 1 / shadow of host root
#         +-- root              overlay merge / chroot root
#         +-- work              overlay workdir
#     +-- iterim
#     +-- final
#     +-- tools
#     +-- sources

lf-bootstrap-setup

chroot "$LfsBootstrap/root" /usr/bin/env -i \
    HOME=$HOME                              \
    TERM=$TERM                              \
    PSX='(bootstrap chroot) \u:\w\$ '       \
    PATH=/tools/bin:/bin:/usr/bin           \
    /bin/bash -i +h

unmount-all $LfsBootstrap
