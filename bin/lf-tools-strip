#!/bin/bash

StripUnneeded ()
{
    echo /usr/bin/strip --strip-unneeded $1
    /usr/bin/strip --strip-unneeded $1
}

StripDebug ()
{
    echo /usr/bin/strip --strip-debug $1
    /usr/bin/strip --strip-debug $1
}

Delete ()
{
    echo rm -fd $1
    rm -fd $1
}

find ~/tools -depth -exec file -i {} \+ | while read name type; do
    deleted=false

    name=${name%:}
    case $name in
        */lib*/*.la) Delete $name; deleted=true ;;
        */man/*) Delete $name; deleted=true ;;
        */info/*) Delete $name; deleted=true ;;
        */doc/*) Delete $name; deleted=true ;;
        */share/locale*) Delete $name; deleted=true ;;
    esac

    [[ deleted=false ]] || continue
    case $type in
        inode/*)                    ;; #--
        text/*)                     ;; #--
        application/octet-stream*)  ;; #--
        application/gzip*)          ;; #--
        application/x-terminfo*)    ;; #--
        application/x-executable*)  StripUnneeded $name ;;
        application/x-sharedlib*)   StripDebug $name ;;
        application/x-object*)      StripDebug $name ;;
        application/x-archive*)     StripDebug $name ;;
        *) echo "$type ---- $name" ;;
    esac
done