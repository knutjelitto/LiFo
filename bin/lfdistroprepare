#!/bin/bash

#source LifoConfig

if [[ "$(whoami)" != "root" ]]; then
    echo "run as root!"
    exit
fi

if [[ "$(pwd)" != "/root" ]]; then
    echo "run in root\`s home!"
    exit
fi

apt --yes update
apt --yes upgrade
apt --yes install man-db less build-essential gawk bison info texinfo file rsync tree

######
# setup .bashrc
if cat ~/.bashrc | grep --silent "lifo setup"; then
    exit
fi

cat >> ~/.bashrc << "EOF"

#######################################################################################
# lifo setup
#
if mountpoint --quiet /root/lifo; then
    true
else
    [[ -d /mnt/d/Knut/Tools/LiFo ]] && mount --bind /mnt/d/Knut/Tools/LiFo /root/lifo
    [[ -d /mnt/d/Projects/LiFo ]] && mount --bind /mnt/d/Projects/LiFo /root/lifo
fi

eval "$(dircolors --sh)"
alias ls='ls --color=auto'
alias l='ls -lA'
alias ll='ls -lA'
alias lll='ll | less'

if [[ -n $PSX ]]; then
    PS1=$PSX
fi

PATH=/root/lifo/bin:${PATH}
EOF
