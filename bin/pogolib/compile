#!/bin/bash -eu

Import PogoConfig

InChroot || Fatal "call in chroot only"

BuildSetupRecipe "${1:-}"

BuildExec()
{
    local function="$1"
    if [[ "$(type -t $function)" == "function" ]]; then
        $function
    else
        echo "NOP for $function"
    fi
}

BuildEnterMain && Prepare
BuildEnterBuildIn && Configure
BuildEnterBuildIn && Build
BuildEnterBuildIn && Install
BuildEnterBuildIn && Trim

