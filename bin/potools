#!/bin/bash
source "$Pogos/.pogoConfig" Tools
Assert_Pool

TODO=\
(
    607-linux-headers
    608-man-pages
    609-glibc
    610-adjusting
    611-zlib
    612-file
    613-readline
    614-m4
    615-bc
    616-binutils
    617-gmp
    618-mpfr
    619-mpc
    620-gcc
    621-bzip2
    622-pkg-config
    623-ncurses
    624-attr
    625-acl
    626-libcap
    627-sed
    628-shadow
    629-psmisc
    630-iana-etc
    631-bison
    632-flex
    633-grep
    634-bash
    635-libtool
    636-gdbm
    637-gperf
    638-expat
    639-inetutils
    640-perl
    641-xml-parser
    642-intltool
    643-autoconf
    644-automake
    645-xz-tools
    646-kmod
    647-gettext
    648-libelf
    649-libffi
    650-openssl
    651-python3
    652-ninja
    653-meson
    654-procps-ng
    655-e2fsprogs
    656-coreutils
    657-check
    658-diffutils
    659-gawk
    660-findutils
    661-groff
    662-grub
    663-less
    664-gzip
    665-iproute
    666-kbd
    667-libpipeline
    668-make
    669-patch
    670-sysklogd
    671-sysvinit
    672-eudev
    673-utillinux
    674-man-db
    675-tar
    676-texinfo
    677-vim
)

if [[ "${1:-}" == "--cleanall" ]]; then
    Build_CleanAll
elif [[ "${1:-}" == "--shell" ]]; then
    true
elif [[ "${1:-}" == "--download" ]]; then
    for recipe in "${TODO[@]}"; do
     readline   Build_Download "$recipe"
    done
elif [[ "${1:-}" == "--build-all" ]]; then
    for recipe in "${TODO[@]}"; do
        Build_Download "$recipe"
    done
    for recipe in "${TODO[@]}"; do
        Build_Make "$recipe" build
        Build_Make "$recipe" done
    done
elif [[ "${1:-}" == "--rebuild-all" ]]; then
    Build_CleanAll
    for recipe in "${TODO[@]}"; do
        Build_Download "$recipe"
    done
    for recipe in "${TODO[@]}"; do
        Build_Make "$recipe" build
        Build_Make "$recipe" done
    done
elif [[ "${1:-}" == "--rebuild-all" ]]; then
    Build_CleanAll
    for recipe in "${TODO[@]}"; do
        Build_Download "$recipe"
    done
    for recipe in "${TODO[@]}"; do
        Build_Make "$recipe" build
        Build_Make "$recipe" done
    done
else
    # $1 must be recipe-token
    Build_Make "$1" "${2:-}"
fi
